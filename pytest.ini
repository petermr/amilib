[tool:pytest]
# Configure pytest for headless operation
testpaths = test
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --tb=short
    --strict-markers
    --disable-warnings
    -W ignore::DeprecationWarning:importlib._bootstrap
    -v
    --ignore=test/test_ipcc.py
    --ignore=test/test_unfccc_pdf.py

# Filter out SWIG-related deprecation warnings from C extensions (lxml, etc.)
# Note: These warnings come from SWIG bindings and may still appear during import
# as they are emitted before Python's warnings system can filter them. This is
# a known issue with SWIG bindings in Python 3.12 and does not affect functionality.
filterwarnings =
    ignore::DeprecationWarning
    ignore:builtin type SwigPyPacked has no __module__ attribute:DeprecationWarning
    ignore:builtin type SwigPyObject has no __module__ attribute:DeprecationWarning
    ignore:builtin type swigvarlink has no __module__ attribute:DeprecationWarning

# Markers for test categorization
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    network: marks tests as requiring network access
    gui: marks tests that might open GUI windows
    headless: marks tests that should run in headless mode

# Environment variables for headless operation
env =
    DISPLAY = :99
    MPLBACKEND = Agg
    PYTHONWARNINGS = ignore::DeprecationWarning 